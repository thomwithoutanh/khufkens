---
title: A mountain forest map
teaser: "some google earth code ..."
author: Koen Hufkens
layout: post
permalink: /2018/09/19/mountain-forest-map/
categories:
  - GIS
  - remote_sensing
tags:
  - remote_sensing
  - science
  - GEE
---

Within the context of the [CLIMO COST action](http://climo.unimol.it/) there was a need for a mountain forest map (EU wide if not global), as defined by FAO rules. These rules specify that forests above 300 m and with a considerable slope are "mountain forest". I put together a Google Earth Engine worked example to generate this data.

Currently the map generated by the code uses the FAO 300 m threshold, together with an arbitrary 5% slope value. The land cover data used is the most common value per pixel of the MODIS Collection 6 Land Cover map (2001 - 2016). Data is exported at a 500 m resolution, the native resolution of the MODIS product.

Below you find an interactive map of the generated product (for the EU). The code, the full resolution data of the same map are included in the [project github repository](https://github.com/khufkens/mountain_forest_map).

<style>
.legend {
	text-align: left;
	line-height: 18px;
	color: #555;
	padding: 6px 8px;
	font: 16px/18px Arial, Helvetica, sans-serif;
	background: rgba(255,255,255,0.8);
	box-shadow: 0 0 15px rgba(0,0,0,0.2);
	border-radius: 5px;
}

.legend h4 {
    margin: 0 0 5px;
	color: #777;
}

.legend i {
	width: 18px;
	height: 18px;
	float: left;
	margin-right: 8px;
	opacity: 0.7;
}

.legend .circle {
	border-radius: 50%;
	width: 10px;
	height: 10px;
	margin-top: 8px;
}

.info {
    padding: 6px 8px;
    font: 14px/16px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info h4 {
    margin: 0 0 5px;
    color: #777;
}

img {
  border-radius: 0%;
}

</style>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>

<div id="map" style="width: 600px%; height: 600px; z-index:0;"></div>

<script type="text/javascript">
      var map = L.map('map').setView([46.529, 6.746], 5);
      var baselayer =  L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
    	maxZoom: 8,
    	minZoom: 5,
    	subdomains:['mt0']}).addTo(map);

      var mytile =L.tileLayer('https://github.com/khufkens/mountain_forest_map/raw/master/tiles/{z}/{x}/{y}.png', {
        maxZoom: 8,
        tms: false
      }).addTo(map);

L.control.layers({'Basemap':baselayer},{'Mountain Forest':mytile}).addTo(map);

function getColor(d) {
    return d == 5  ? '#5E3C99' :
                d == 4  ? '#B2ABD2' :
                d == 3  ? '#F7F7F7' :
                d == 2  ? '#FDB863' :
                d == 1  ? '#E66101' :
                                '#E66101' ;
}

var legend = L.control({position: 'bottomright'});

legend.onAdd = function (map) {
      var div = L.DomUtil.create('div', 'info legend'),
         grades = [1, 2, 3, 4, 5],
         labels = ['ENF','DNF','EBF','DBF','MIX'];

    for (var i = 0; i < grades.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(grades[i]) + '"></i> ' +
            labels[i] + '<br><br>';
    }
    return div;
};

legend.addTo(map);
</script>
	



